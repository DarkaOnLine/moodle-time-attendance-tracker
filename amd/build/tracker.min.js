define(["jquery"],function(a){return{active_time:0,is_window_active:!0,popup_window_active:!1,cfg:{},initialise:function(a,b,c,d,e,f,g){this.cfg.user_id=a,this.cfg.course_id=b,this.cfg.is_popup=c,this.cfg.url=d,this.cfg.lesson_id=e,this.cfg.quiz_id=f,this.cfg.key=g;var h=this;h.addListeners(),setInterval(function(){h.startTracking()},1e3)},addListeners:function(){var a=this;window.addEventListener?(window.addEventListener("focus",function(){a.setWindowActive()},!1),window.addEventListener("blur",function(){a.setWindowInactive()},!1),a.cfg.is_popup||window.addEventListener("unload",function(){a.addTime()},!1)):window.attachEvent?(document.attachEvent("onfocusin",function(){a.setWindowActive()}),document.attachEvent("onfocusout",function(){a.setWindowInactive()}),a.cfg.is_popup||window.attachEvent("onunload",function(){a.addTime()})):(window.onfocus=function(){a.setWindowActive()},window.onblur=function(){a.setWindowInactive()},a.cfg.is_popup||(window.onunload=function(){a.addTime()}))},startTracking:function(){this.is_window_active&&this.active_time++,10==this.active_time&&this.addTime()},addTime:function(){var b=this,c=this.active_time;this.active_time=0,a.ajax({url:b.cfg.url,data:{time:c,user_id:b.cfg.user_id,course_id:b.cfg.course_id,lesson_id:b.cfg.lesson_id,quiz_id:b.cfg.quiz_id,key:b.cfg.key}})},setWindowActive:function(){this.is_window_active=!0},setWindowInactive:function(){this.is_window_active=!1}}});