define(["jquery"],function(a){return{active_time:0,is_window_active:!0,popup_window_active:!1,cfg:{},initialise:function(a,b,c,d,e,f,g){this.cfg.user_id=a,this.cfg.course_id=b,this.cfg.is_popup=c,this.cfg.url=d,this.cfg.lesson_id=e,this.cfg.quiz_id=f,this.cfg.key=g;var h=this;h.addListeners(),setInterval(function(){h.startTracking()},1e3)},addListeners:function(){var b=this;a(window).focus(function(){b.setWindowActive()}),a(window).blur(function(){b.setWindowInactive()}),b.cfg.is_popup||a(window).on("beforeunload",function(){b.addTime()})},startTracking:function(){this.is_window_active&&this.active_time++,10==this.active_time&&this.addTime()},addTime:function(){var b=this,c=this.active_time;this.active_time=0,a.ajax({url:b.cfg.url,data:{time:c,user_id:b.cfg.user_id,course_id:b.cfg.course_id,lesson_id:b.cfg.lesson_id,quiz_id:b.cfg.quiz_id,key:b.cfg.key}})},setWindowActive:function(){this.is_window_active=!0},setWindowInactive:function(){this.is_window_active=!1}}});